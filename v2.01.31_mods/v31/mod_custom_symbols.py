## PATCH file created by Symbols_encode31.py
## Replaces all symbols on screen with a rotated +90 degree, 1bit BMP
## LarSeN: Added 1 more RSSI step instead of antenna icon

symbols=b'\x60\x20\x60\x70\x10\x70\x78\x08\x78\x7C\x04\x7C\x7E\x02\x7E\x7F\x01\x7F\x00\x7F\x7F\x00\x00\x08\x1C\x3E\x3E\x1C\x08\x3E\x41\x41\x00\x7F\x08\x08\x70\x1C\x22\x22\x36\x3E\x1C\x1C\x08\x08\x1C\x36\x22\x08\x1C\x36\x22\x01\x02\x04\x7F\x04\x62\x79\x7E\x01\x02\x04\x7F\x04\x62\x79\x78\x01\x02\x04\x7F\x04\x62\x61\x60\x14\x16\x17\x14\x14\x74\x34\x14\x00\x18\x18\x7E\x7E\x7E\x18\x18\x00\x18\x18\x18\x18\x18\x18\x18\x7F\x7F\x02\x01\x01\x03\x7F\x7E\xB7\x97\xA7\xB7\xED\xE5\xE9\xED\x00\x00\x7F\x09\x09\x09\x01\x00\x00\xFF\xAF\xF9\xA9\xF9\xAF\xFF\x0C\x12\x22\x44\x22\x12\x0C\x00\x00\x0C\x12\x22\x44\x22\x12\x0C\x00\x00\x0C\x12\x32\x74\x32\x12\x0C\x00\x00\x0C\x12\x22\x44\x22\x12\x0C\x00\x00\x0C\x1E\x3E\x7C\x3E\x1E\x0C\x00\x00\x0C\x12\x22\x44\x22\x12\x0C\x00\x00\x0C\x1E\x3E\x7C\x3E\x1E\x0C\x00\x00\x0C\x12\x32\x74\x32\x12\x0C\x00\x00\x0C\x1E\x3E\x7C\x3E\x1E\x0C\x00\x00\x0C\x1E\x3E\x7C\x3E\x1E\x0C\x00\x00\x00\x7C\x12\x12\x12\x7C\x00\x7E\x02\x0C\x02\x7E\x00\x18\x04\x02\x02\x04\x18\x20\x40\x40\x20\x18\x00\x00\x40\x40\x40\x7E\x02\x02\x02\x7E\x40\x40\x40\x7E\x02\x02\x02\x00\x00\x3E\x41\x7D\x7F\x4B\x7F\x7D\x41\x7F\x7F\x4B\x4B\x43\x41\x3E\x00\x3E\x7F\x7D\x41\x41\x7D\x7F\x7F\x5D\x49\x63\x49\x5D\x7F\x3E\x00\x00\x00\x3C\x42\x99\x24\x00\x00\x40\x7C\x42\xC1\xC1\x42\x7C\x40\x00\x00\x24\x99\x42\x3C\x00\x00\x00\x00\x18\x00\x7E\x00\x3C\x00\xFF\x00\x3C\x00\x7E\x00\x18\x00\x00\x00\x00\x00\x18\xDC\x7E\x3B\x18\x00\x00\x02\x05\x05\xFD\xA5\xA5\x02\x00\x00\x1E\x20\x40\x20\x1E\x00\x3C\x42\x42\x42\x3C\x00\x66\x18\x00\x18\x66\xFF\xDB\xB5\xB5\xB5\xCF\xFD\xFD\x81\xFD\xFD\xFF\x00\x7E\x42\x42\x3C\x00\x7E\x20\x18\x20\x7E\x00\x00\x70\x88\x83\x9D\x6A\x28\xE8\x80\x00\x00\x00\x20\x70\x70\x70\x3F\x05\x0A\x00\x00\xFF\xFF\x81\x81\xED\xED\xED\xFD\xFF\xFF\x7F\x40\x78\x40\x70\x41\x7B\x41\x70\x40\x78\x7F'

##--------------------- do not modify below this line ---------------------------------------------------
import os,sys,struct
print('* Running',os.path.basename(sys.argv[0]),'mod...')
fw =  bytearray(open(sys.argv[1],'rb').read())
if fw[0xD3BC+134:0xD3BC+223] == b'>"\x7fAAAAAAAAAAAAAc\x00>"\x7fA]]AAAAAAAAAAc\x00>"\x7fA]]A]]AAAAAAAc\x00>"\x7fA]]A]]A]]AAAAc\x00>"\x7fA]]A]]A]]A]]Ac': 
    print('Replacing symbols bitmaps...')
    fw[0xD3BC:0xD3BC+len(symbols)] = symbols
    #NON fw[0x855C:0x855C+14] = b'\x27\x49\x05\x22\x20\x46\xF7\xF7\x1D\xFE\x00\x2D\x3E\xD0'   #Antenne affiche si RSSI >0
else:
    print('ERROR: Cant find data')
    sys.exit(0)

if len(fw)<0xEFFF:
    open(sys.argv[1],'wb').write(fw)
else:
    print('ERROR file too big!')
